{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { Plugin, ResolvedConfig } from 'vite'\nimport { minify, Options } from 'html-minifier-terser'\n\nexport function ViteMinifyPlugin(options?: Options): Plugin {\n  let config: ResolvedConfig\n\n  return {\n    name: 'vite-plugin-minify',\n    configResolved: resolvedConfig => {\n      config = resolvedConfig\n    },\n    transformIndexHtml: {\n      enforce: 'post',\n      transform: html => {\n        if (config.mode !== 'production') {\n          return html\n        }\n\n        return minify(html, {\n          removeComments: true,\n          collapseWhitespace: true,\n          collapseBooleanAttributes: true,\n          removeAttributeQuotes: false,\n          removeEmptyAttributes: true,\n          minifyCSS: true,\n          minifyJS: true,\n          minifyURLs: true,\n          ...options,\n        })\n      },\n    },\n  }\n}\n"],"mappings":"+qBAAA,2DACA,MAAgC,gCAEzB,WAA0B,EAA2B,CAC1D,GAAI,GAEJ,MAAO,CACL,KAAM,qBACN,eAAgB,GAAkB,CAChC,EAAS,CACX,EACA,mBAAoB,CAClB,QAAS,OACT,UAAW,GACL,EAAO,OAAS,aACX,EAGF,aAAO,EAAM,GAClB,eAAgB,GAChB,mBAAoB,GACpB,0BAA2B,GAC3B,sBAAuB,GACvB,sBAAuB,GACvB,UAAW,GACX,SAAU,GACV,WAAY,IACT,EACJ,CAEL,CACF,CACF","names":[]}